<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.fa.plus.mapper.ProductMapper">
	<!-- 일반 상품 목록 -->
	<select id="dataCount" parameterType="map" resultType="Integer">
		SELECT NVL(COUNT(*), 0) 
		FROM product
		WHERE product_status=1 AND category_num = #{category_num}
	</select>
	
	<select id="listProduct" parameterType="map" resultType="com.fa.plus.domain.Product">
		SELECT product_num, p.category_num, category_name, product_name, product_price, product_summary
		FROM product p
		JOIN product_category c ON p.category_num = c.category_num
		WHERE p.product_status=1 AND p.category_num = #{category_num}
		ORDER BY product_num DESC
		OFFSET #{offset} ROWS FETCH FIRST #{size} ROWS ONLY
	</select>
	
	
</mapper>